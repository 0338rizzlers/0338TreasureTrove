#include <stdio.h>
#include <turn.h>
#include <kipr/wombat.h>
#include "Move.h"
#include "serbo.h"
#include "square_up.h"
#include "Forward.h"
#include "line_follow_calibration.h"
#include "crabwalk.h"
// /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//                                                                     NOTES
//                                MAKE SURE TO SAVE YOUR CODE!!!!!! MAKE SURE TO SAVE YOUR CODE!!!! EVEN BEFORE SWITCHING FILES IN THE SAME PROJECT!!!
//                               ALSO MAKE SURE TO HAVE A ; AT THE END OF EVERY CODE!
// Slow Servo:         void servo(int port, int position, int speed)
// Move:               void move(int mtrFLpwr, int mtrFRpwr, int mtrRLpwr, int mtrRRpwr, int time)  
// Go Forward:         void forward( int speed, int duration)
//To Turn :            void turn( int speed, int duration)
// To crabwalk :       void crabwalk(int direction(0 = right, 1 = left), int duration)
// To line follow:     void line_follow(int distance, int speed, float factor, int port)
// To use the servos:  void serbo(int port, int position, int speed) **** ITS SERBO NOT SERVO****
// /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

int main() {
    float factor_entrees = -0.1;//CHANGE BOTH OF THESE IN MOVE.H IF YOU CHANGE IT HERE AND VICE VERSA
    float factor_trays = 0.025;
    // Hamburger
    serbo(2, 700, 1);
    serbo(0,2100,1); //just adjust the claw to optimal position
    move(1000,1000,1000,1000,3200); //move to the corner of the table
    turn(-500,4200); //turn to face entrees
    move(1500,1500,1500,1500,4000); //move forward towards the hamburger
    serbo(0,1400,1); 
    serbo(2,750,1); //lower and clamp onto the claw
    msleep(300);
    serbo(2,717,1); //go up
    move(-1500,-1500,-1500,-1500,1700); //goes back a lil after grabbing the burger
    msleep(500);
    turn(-1000,2000);// turns right
    msleep(500);
    move(-700,-700,-700,-700,1800); //backs up for zeroing.
    msleep(500);
    move(1500,1500,1500,1500,2000); //goes forward past the black tape
    line_follow(5100, 900, factor_trays, 2); //linee follow code to the second box.
    msleep(300); //sleep a lil *honk shoo*
    turn(-1500,1500); //turns right towards the second box
    move(1500,1500,1500,1500,1600); //move towards the second box
    serbo(2,1300,1);
    serbo(0,2407,1); //disclamps th burger
    
    //Hot dog
    serbo(2, 650, 1); // reset arm + claw
    serbo(0,2047,1);
    move(-1500,-1500,-1500,-1500,655); // backs up
    turn(-1500,1550); // turns right towards line
    line_follow(4250, 970, factor_entrees, 2); // go to the line perpendicular to the starting box
    move(1000,1000,1000,1000,5000); // square up
    msleep(500);
    move(-1000, -1000, -1000, -1000, 845);// back up a bit
    msleep(300);
    turn(-1350, 1410); // turns right towards warming station
    crabwalk(1, 700);
    printf("First crabwalk done");
    msleep(300); //wait a bit
    crabwalk(0, 850);
    printf("second crabwalk done");
    move(1500,1500,1500,1500,1650); // move towards the serving station
    msleep(300);
     serbo(2,900,1); 
    serbo(0,1300,1); //lower and clamp onto the claw
    msleep(1000);
    serbo(2,717,1); //go up
    msleep(300);
     move(-1500,-1500,-1500,-1500,1500); //goes back a lil after grabbing the hot dog
    msleep(500);
    turn(-500,4000);// turns right
    msleep(500);
    move(-700,-700,-700,-700,1700); //backs up for zeroing.
    msleep(500);
    move(1500,1500,1500,1500,2300); //goes forward past the black tape
    line_follow(5600, 1500, factor_trays, 2); //linee follow code to the second box.
    msleep(300); //sleep a lil *honk shoo*
    turn(-1000,1260); //turns right towards the second box
    move(1500,1500,1500,1500,1200); //move towards the second box
    serbo(2,1300,1);
    serbo(0,1800,1); //disclamps the hottie dawg
    msleep(300);
    
    // Taco
    serbo(2, 650, 1); // reset arm + claw
    serbo(0,1800,1);
    move(-1500,-1500,-1500,-1500,1100); // backs up
    turn(-1500,950); // turns right towards line
    line_follow(5600, 970, factor_entrees, 2); // go to the line perpendicular to the starting box
    move(1500,1500,1500,1500,3000); // square up
    msleep(500);
    move(-1000, -1000, -1000, -1000, 1400);// back up a bit
    msleep(300);
    turn(-750, 1675); // turns right towards warming station
    msleep(300); //wait a bit
    move(1600,1600,1600,1600,1800); // move towards the serving station
    msleep(300);
    serbo(2,900,1); 
    serbo(0,1050,1); //lower and clamp onto the claw 
    msleep(1000);
    serbo(2,717,1); //go up
    msleep(300);
     move(-1500,-1500,-1500,-1500,1850); //goes back a lil after grabbing the taco
    msleep(500);
    turn(-500,2800);// turns right
    msleep(500);
    move(-700,-700,-700,-700,1500); //backs up for zeroing.
    msleep(500);
    move(1500,1500,1500,1500,2300); //goes forward past the black tape
    line_follow(5600, 1500, factor_trays, 2); //linee follow code to the second box.
    printf("Done with line follow \n");
    msleep(300); //sleep a lil *honk shoo*
    turn(-1000,1960); //turns right towards the second box
    move(1500,1500,1500,1500,1100); //move towards the second box
    serbo(2,1300,1);
    serbo(0,1800,1); //disclamps the taco belle
    msleep(300);
    printf("The code has failed to complete please send your credit card number to totallyrealUPS.com\n");
    return 0;
}
